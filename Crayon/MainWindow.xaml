<?xml version="1.0" encoding="utf-8"?>
<Window
  x:Class="Crayon.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:Crayon"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  Title="Crayon">

	<Window.SystemBackdrop>
		<MicaBackdrop />
	</Window.SystemBackdrop>
	<Grid>
		<Grid.Resources>
			<Style x:Key="CustomColorToggleButton" TargetType="ToggleButton">
				<Setter Property="Width" Value="32"/>
				<Setter Property="Height" Value="32"/>
				<Setter Property="Background" Value="Transparent"/>
				<Setter Property="BorderThickness" Value="0"/>
				<Setter Property="Padding" Value="0"/>
				<Setter Property="Template">
					<Setter.Value>
						<ControlTemplate TargetType="ToggleButton">
							<Grid Width="24" Height="24" RenderTransformOrigin="0.5,0.5">
								<Grid.RenderTransform>
									<ScaleTransform x:Name="Scale" ScaleX="1" ScaleY="1"/>
								</Grid.RenderTransform>

								<Ellipse x:Name="MyEllipse">
									<Ellipse.Fill>
										<SolidColorBrush Color="{Binding Color}" />
									</Ellipse.Fill>
									<Ellipse.Stroke>
										<SolidColorBrush Color="Black" />
									</Ellipse.Stroke>
									<Ellipse.StrokeThickness>0</Ellipse.StrokeThickness>
								</Ellipse>

								<VisualStateManager.VisualStateGroups>

									<VisualStateGroup x:Name="CommonStates">

										<VisualState x:Name="Normal">
											<Storyboard>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.0" Duration="0:0:0.10"/>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.0" Duration="0:0:0.10"/>
											</Storyboard>
											<VisualState.Setters>
												<Setter Target="MyEllipse.StrokeThickness" Value="0"/>
											</VisualState.Setters>
										</VisualState>

										<VisualState x:Name="PointerOver">
											<Storyboard>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.2" Duration="0:0:0.10"/>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.2" Duration="0:0:0.10"/>
											</Storyboard>
											<VisualState.Setters>
												<Setter Target="MyEllipse.StrokeThickness" Value="1"/>
											</VisualState.Setters>
										</VisualState>

										<VisualState x:Name="Pressed">
											<Storyboard>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.2" Duration="0:0:0.10"/>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.2" Duration="0:0:0.10"/>
											</Storyboard>
											<VisualState.Setters>
												<Setter Target="MyEllipse.StrokeThickness" Value="1"/>
											</VisualState.Setters>
										</VisualState>

									</VisualStateGroup>

									<VisualStateGroup x:Name="CheckStates">

										<VisualState x:Name="Checked">
											<Storyboard>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.2" Duration="0:0:0.10"/>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.2" Duration="0:0:0.10"/>
											</Storyboard>
											<VisualState.Setters>
												<Setter Target="MyEllipse.StrokeThickness" Value="1"/>
											</VisualState.Setters>
										</VisualState>

										<VisualState x:Name="Unchecked">
											<Storyboard>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.0" Duration="0:0:0.10"/>
												<DoubleAnimation Storyboard.TargetName="Scale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.0" Duration="0:0:0.10"/>
											</Storyboard>
											<VisualState.Setters>
												<Setter Target="MyEllipse.StrokeThickness" Value="0"/>
											</VisualState.Setters>
										</VisualState>

									</VisualStateGroup>

								</VisualStateManager.VisualStateGroups>

							</Grid>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>
		</Grid.Resources>

		<Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<Grid x:Name="AppTitleBar" Height="32" Grid.Row="0">

		</Grid>
		<StackPanel Padding="20" Spacing="20" Grid.Row="1">

			<ItemsControl x:Name="ColorsList" ItemsSource="{x:Bind AvailableColors}">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<ItemsWrapGrid Orientation="Horizontal"/>
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="local:ColorItem">
						<ToggleButton IsChecked="{Binding IsSelected, Mode=TwoWay}"
                          Style="{StaticResource CustomColorToggleButton}"
                          Checked="Color_Checked"/>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>

			<TextBlock x:Name="SelectedText" Text="You've selected the colorâ€”none." />

        </StackPanel>

		<InfoBar x:Name="MyInfoBar"
                     Severity="Informational"
                     Title="Error 0"
                     Message="Error message."
                     IsOpen="False"
					 Grid.Row="2"
					 Margin="20" />

		<Grid x:Name="Footer" Grid.Row="3" Padding="10">
			<Grid.Background>
				<SolidColorBrush Color="{ThemeResource SubtleFillColorSecondary}" />
			</Grid.Background>

			<Button x:Name="ClearButton" Content="Clear" Click="ClearButton_Click" />
        </Grid>
    </Grid>
</Window>
